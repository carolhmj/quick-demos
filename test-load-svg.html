<html>
    <head>
        <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' *; img-src 'self'; script-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'"
    />
        <title>Test load HTML</title>
    </head>
    <body>
        <img src="./assets/textures/svg/star.svg" alt="Star">
        <script>
            const newImg = document.createElement("img");
            document.body.appendChild(newImg);

            document.addEventListener("securitypolicyviolation", (e) => {
                console.log('got event securitypolicyviolation')
                console.log(e.blockedURI);    
                console.log(e.violatedDirective);    
                console.log(e.originalPolicy);
            });

            fetch("https://raw.githubusercontent.com/carolhmj/quick-demos/main/assets/textures/svg/star.svg").then((response) => {
                console.log(response);
                response.arrayBuffer().then((data) => {
                    try {
                        const blob = new Blob([data], {type: 'image/svg+xml'});
                        const url = URL.createObjectURL(blob);
                        newImg.src = url;
                        newImg.onabort = () => {
                            console.error('load aborted');
                        }
                        newImg.onload = (ev) => {
                            console.log('load event', ev);
                        }
                        // newImg.addEventListener("securitypolicyviolation", (e) => {
                        //     console.log('got event securitypolicyviolation')
                        //     console.log(e.blockedURI);    
                        //     console.log(e.violatedDirective);    
                        //     console.log(e.originalPolicy);
                        // });
                    } catch (e) {
                        console.error('catched', e);
                    }
                });
            });

            const newImg2 = document.createElement("img");
            document.body.appendChild(newImg2);

            fetch("https://raw.githubusercontent.com/carolhmj/quick-demos/main/assets/textures/sprites/64/armor.png").then((response) => {
                console.log(response);
                response.arrayBuffer().then((data) => {
                    const blob = new Blob([data]);
                    const url = URL.createObjectURL(blob);
                    newImg2.src = url;
                });
            });

        </script>
    </body>
</html>